---
source: crates/pgls_pretty_print/tests/tests.rs
input_file: crates/pgls_pretty_print/tests/data/multi/tstypes.sql
snapshot_kind: text
---
set extra_float_digits = 0;

select cast('1' as TSVECTOR);

select cast('1 ' as TSVECTOR);

select cast(' 1' as TSVECTOR);

select cast(' 1 ' as TSVECTOR);

select cast('1 2' as TSVECTOR);

select cast('''1 2''' as TSVECTOR);

select cast('''1 \''2''' as TSVECTOR);

select cast('''1 \''2''3' as TSVECTOR);

select cast('''1 \''2'' 3' as TSVECTOR);

select cast('''1 \''2'' '' 3'' 4 ' as TSVECTOR);

select cast('''\\as'' ab\c ab\\c AB\\\c ab\\\\c' as TSVECTOR);

select tsvectorin(tsvectorout(cast('''\\as'' ab\c ab\\c AB\\\c ab\\\\c' as TSVECTOR)));

select '''w'':4A,3B,2C,1D,5 a:8';

select cast('a:3A b:2a' as TSVECTOR) || 'ba:1234 a:1B';

select cast(''''' ''1'' ''2''' as TSVECTOR);

select pg_input_is_valid('foo', 'tsvector');

select pg_input_is_valid('''''', 'tsvector');

select * from pg_input_error_info('''''', 'tsvector');

select cast('1' as TSQUERY);

select cast('1 ' as TSQUERY);

select cast(' 1' as TSQUERY);

select cast(' 1 ' as TSQUERY);

select cast('''1 2''' as TSQUERY);

select cast('''1 \''2''' as TSQUERY);

select cast('!1' as TSQUERY);

select cast('1|2' as TSQUERY);

select cast('1|!2' as TSQUERY);

select cast('!1|2' as TSQUERY);

select cast('!1|!2' as TSQUERY);

select cast('!(!1|!2)' as TSQUERY);

select cast('!(!1|2)' as TSQUERY);

select cast('!(1|!2)' as TSQUERY);

select cast('!(1|2)' as TSQUERY);

select cast('1&2' as TSQUERY);

select cast('!1&2' as TSQUERY);

select cast('1&!2' as TSQUERY);

select cast('!1&!2' as TSQUERY);

select cast('(1&2)' as TSQUERY);

select cast('1&(2)' as TSQUERY);

select cast('!(1)&2' as TSQUERY);

select cast('!(1&2)' as TSQUERY);

select cast('1|2&3' as TSQUERY);

select cast('1|(2&3)' as TSQUERY);

select cast('(1|2)&3' as TSQUERY);

select cast('1|2&!3' as TSQUERY);

select cast('1|!2&3' as TSQUERY);

select cast('!1|2&3' as TSQUERY);

select cast('!1|(2&3)' as TSQUERY);

select cast('!(1|2)&3' as TSQUERY);

select cast('(!1|2)&3' as TSQUERY);

select cast('1|(2|(4|(5|6)))' as TSQUERY);

select cast('1|2|4|5|6' as TSQUERY);

select cast('1&(2&(4&(5&6)))' as TSQUERY);

select cast('1&2&4&5&6' as TSQUERY);

select cast('1&(2&(4&(5|6)))' as TSQUERY);

select cast('1&(2&(4&(5|!6)))' as TSQUERY);

select cast('1&(''2''&('' 4''&(\|5 | ''6 \'' !|&'')))' as TSQUERY);

select cast('''\\as''' as TSQUERY);

select cast('a:* & nbb:*ac | doo:a* | goo' as TSQUERY);

select cast('!!b' as TSQUERY);

select cast('!!!b' as TSQUERY);

select cast('!(!b)' as TSQUERY);

select cast('a & !!b' as TSQUERY);

select cast('!!a & b' as TSQUERY);

select cast('!!a & !!b' as TSQUERY);

select pg_input_is_valid('foo', 'tsquery');

select pg_input_is_valid('foo!', 'tsquery');

select * from pg_input_error_info('foo!', 'tsquery');

select * from pg_input_error_info('a <100000> b', 'tsquery');

select 'a' < cast('b & c' as TSQUERY) as "true";

select 'a' > cast('b & c' as TSQUERY) as "false";

select 'a | f' < cast('b & c' as TSQUERY) as "false";

select 'a | ff' < cast('b & c' as TSQUERY) as "false";

select 'a | f | g' < cast('b & c' as TSQUERY) as "false";

select numnode(cast('new' as TSQUERY));

select numnode(cast('new & york' as TSQUERY));

select numnode(cast('new & york | qwery' as TSQUERY));

select cast('foo & bar' as TSQUERY) && 'asd';

select cast('foo & bar' as TSQUERY) || 'asd & fg';

select cast('foo & bar' as TSQUERY) || (!!cast('asd & fg' as TSQUERY));

select cast('foo & bar' as TSQUERY) && 'asd | fg';

select 'a' <-> cast('b & d' as TSQUERY);

select 'a & g' <-> cast('b & d' as TSQUERY);

select 'a & g' <-> cast('b | d' as TSQUERY);

select 'a & g' <-> cast('b <-> d' as TSQUERY);

select tsquery_phrase('a <3> g', 'b & d', 10);

select cast('a b:89  ca:23A,64b d:34c' as TSVECTOR) @@ 'd:AC & ca' as "true";

select cast('a b:89  ca:23A,64b d:34c' as TSVECTOR) @@ 'd:AC & ca:B' as "true";

select cast('a b:89  ca:23A,64b d:34c' as TSVECTOR) @@ 'd:AC & ca:A' as "true";

select cast('a b:89  ca:23A,64b d:34c' as TSVECTOR) @@ 'd:AC & ca:C' as "false";

select cast('a b:89  ca:23A,64b d:34c' as TSVECTOR) @@ 'd:AC & ca:CB' as "true";

select cast('a b:89  ca:23A,64b d:34c' as TSVECTOR) @@ 'd:AC & c:*C' as "false";

select cast('a b:89  ca:23A,64b d:34c' as TSVECTOR) @@ 'd:AC & c:*CB' as "true";

select cast('a b:89  ca:23A,64b cb:80c d:34c' as TSVECTOR) @@ 'd:AC & c:*C' as "true";

select cast('a b:89  ca:23A,64c cb:80b d:34c' as TSVECTOR) @@ 'd:AC & c:*C' as "true";

select cast('a b:89  ca:23A,64c cb:80b d:34c' as TSVECTOR) @@ 'd:AC & c:*B' as "true";

select cast('wa:1D wb:2A' as TSVECTOR) @@ cast('w:*D & w:*A' as TSQUERY) as "true";

select cast('wa:1D wb:2A' as TSVECTOR) @@ cast('w:*D <-> w:*A' as TSQUERY) as "true";

select cast('wa:1A wb:2D' as TSVECTOR) @@ cast('w:*D <-> w:*A' as TSQUERY) as "false";

select cast('wa:1A' as TSVECTOR) @@ cast('w:*A' as TSQUERY) as "true";

select cast('wa:1A' as TSVECTOR) @@ cast('w:*D' as TSQUERY) as "false";

select cast('wa:1A' as TSVECTOR) @@ cast('!w:*A' as TSQUERY) as "false";

select cast('wa:1A' as TSVECTOR) @@ cast('!w:*D' as TSQUERY) as "true";

select strip(cast('wa:1A' as TSVECTOR)) @@ cast('w:*A' as TSQUERY) as "true";

select strip(cast('wa:1A' as TSVECTOR)) @@ cast('w:*D' as TSQUERY) as "true";

select strip(cast('wa:1A' as TSVECTOR)) @@ cast('!w:*A' as TSQUERY) as "false";

select strip(cast('wa:1A' as TSVECTOR)) @@ cast('!w:*D' as TSQUERY) as "false";

select cast('supernova' as TSVECTOR) @@ cast('super' as TSQUERY) as "false";

select cast('supeanova supernova' as TSVECTOR) @@ cast('super' as TSQUERY) as "false";

select cast('supeznova supernova' as TSVECTOR) @@ cast('super' as TSQUERY) as "false";

select cast('supernova' as TSVECTOR) @@ cast('super:*' as TSQUERY) as "true";

select cast('supeanova supernova' as TSVECTOR) @@ cast('super:*' as TSQUERY) as "true";

select cast('supeznova supernova' as TSVECTOR) @@ cast('super:*' as TSQUERY) as "true";

select to_tsvector('simple', '1 2 3 1') @@ '1 <-> 2' as "true";

select to_tsvector('simple', '1 2 3 1') @@ '1 <2> 2' as "false";

select to_tsvector('simple', '1 2 3 1') @@ '1 <-> 3' as "false";

select to_tsvector('simple', '1 2 3 1') @@ '1 <2> 3' as "true";

select to_tsvector('simple', '1 2 1 2') @@ '1 <3> 2' as "true";

select to_tsvector('simple', '1 2 11 3') @@ '1 <-> 3' as "false";

select to_tsvector('simple', '1 2 11 3') @@ '1:* <-> 3' as "true";

select to_tsvector('simple', '1 2 3 4') @@ '1 <-> 2 <-> 3' as "true";

select to_tsvector('simple', '1 2 3 4') @@ '(1 <-> 2) <-> 3' as "true";

select to_tsvector('simple', '1 2 3 4') @@ '1 <-> (2 <-> 3)' as "true";

select to_tsvector('simple', '1 2 3 4') @@ '1 <2> (2 <-> 3)' as "false";

select to_tsvector('simple', '1 2 1 2 3 4') @@ '(1 <-> 2) <-> 3' as "true";

select to_tsvector('simple', '1 2 1 2 3 4') @@ '1 <-> 2 <-> 3' as "true";

select strip(to_tsvector('simple', '1 2 3 4')) @@ '1 <-> 2 <-> 3' as "false";

select to_tsvector('simple', 'q x q y') @@ 'q <-> (x & y)' as "false";

select to_tsvector('simple', 'q x') @@ 'q <-> (x | y <-> z)' as "true";

select to_tsvector('simple', 'q y') @@ 'q <-> (x | y <-> z)' as "false";

select to_tsvector('simple', 'q y z') @@ 'q <-> (x | y <-> z)' as "true";

select to_tsvector('simple', 'q y x') @@ 'q <-> (x | y <-> z)' as "false";

select to_tsvector('simple', 'q x y') @@ 'q <-> (x | y <-> z)' as "true";

select to_tsvector('simple', 'q x') @@ '(x | y <-> z) <-> q' as "false";

select to_tsvector('simple', 'x q') @@ '(x | y <-> z) <-> q' as "true";

select to_tsvector('simple', 'x y q') @@ '(x | y <-> z) <-> q' as "false";

select to_tsvector('simple', 'x y z') @@ '(x | y <-> z) <-> q' as "false";

select to_tsvector('simple', 'x y z q') @@ '(x | y <-> z) <-> q' as "true";

select to_tsvector('simple', 'y z q') @@ '(x | y <-> z) <-> q' as "true";

select to_tsvector('simple', 'y y q') @@ '(x | y <-> z) <-> q' as "false";

select to_tsvector('simple', 'y y q') @@ '(!x | y <-> z) <-> q' as "true";

select to_tsvector('simple', 'x y q') @@ '(!x | y <-> z) <-> q' as "true";

select to_tsvector('simple', 'y y q') @@ '(x | y <-> !z) <-> q' as "true";

select to_tsvector('simple', 'x q') @@ '(x | y <-> !z) <-> q' as "true";

select to_tsvector('simple', 'x q') @@ '(!x | y <-> z) <-> q' as "false";

select to_tsvector('simple', 'z q') @@ '(!x | y <-> z) <-> q' as "true";

select to_tsvector('simple', 'x y q') @@ '(!x | y) <-> y <-> q' as "false";

select to_tsvector('simple', 'x y q') @@ '(!x | !y) <-> y <-> q' as "true";

select to_tsvector('simple', 'x y q') @@ '(x | !y) <-> y <-> q' as "true";

select to_tsvector('simple', 'x y q') @@ '(x | !!z) <-> y <-> q' as "true";

select to_tsvector('simple', 'x y q y') @@ '!x <-> y' as "true";

select to_tsvector('simple', 'x y q y') @@ '!x <-> !y' as "true";

select to_tsvector('simple', 'x y q y') @@ '!x <-> !!y' as "true";

select to_tsvector('simple', 'x y q y') @@ '!(x <-> y)' as "false";

select to_tsvector('simple', 'x y q y') @@ '!(x <2> y)' as "true";

select strip(to_tsvector('simple', 'x y q y')) @@ '!x <-> y' as "false";

select strip(to_tsvector('simple', 'x y q y')) @@ '!x <-> !y' as "false";

select strip(to_tsvector('simple', 'x y q y')) @@ '!x <-> !!y' as "false";

select strip(to_tsvector('simple', 'x y q y')) @@ '!(x <-> y)' as "true";

select strip(to_tsvector('simple', 'x y q y')) @@ '!(x <2> y)' as "true";

select to_tsvector('simple', 'x y q y') @@ '!foo' as "true";

select to_tsvector('simple', '') @@ '!foo' as "true";

select ts_rank(cast(' a:1 s:2C d g' as TSVECTOR), 'a | s');

select ts_rank(cast(' a:1 sa:2C d g' as TSVECTOR), 'a | s');

select ts_rank(cast(' a:1 sa:2C d g' as TSVECTOR), 'a | s:*');

select ts_rank(cast(' a:1 sa:2C d g' as TSVECTOR), 'a | sa:*');

select ts_rank(cast(' a:1 s:2B d g' as TSVECTOR), 'a | s');

select ts_rank(cast(' a:1 s:2 d g' as TSVECTOR), 'a | s');

select ts_rank(cast(' a:1 s:2C d g' as TSVECTOR), 'a & s');

select ts_rank(cast(' a:1 s:2B d g' as TSVECTOR), 'a & s');

select ts_rank(cast(' a:1 s:2 d g' as TSVECTOR), 'a & s');

select ts_rank_cd(cast(' a:1 s:2C d g' as TSVECTOR), 'a | s');

select ts_rank_cd(cast(' a:1 sa:2C d g' as TSVECTOR), 'a | s');

select ts_rank_cd(cast(' a:1 sa:2C d g' as TSVECTOR), 'a | s:*');

select ts_rank_cd(cast(' a:1 sa:2C d g' as TSVECTOR), 'a | sa:*');

select ts_rank_cd(cast(' a:1 sa:3C sab:2c d g' as TSVECTOR), 'a | sa:*');

select ts_rank_cd(cast(' a:1 s:2B d g' as TSVECTOR), 'a | s');

select ts_rank_cd(cast(' a:1 s:2 d g' as TSVECTOR), 'a | s');

select ts_rank_cd(cast(' a:1 s:2C d g' as TSVECTOR), 'a & s');

select ts_rank_cd(cast(' a:1 s:2B d g' as TSVECTOR), 'a & s');

select ts_rank_cd(cast(' a:1 s:2 d g' as TSVECTOR), 'a & s');

select ts_rank_cd(cast(' a:1 s:2A d g' as TSVECTOR), 'a <-> s');

select ts_rank_cd(cast(' a:1 s:2C d g' as TSVECTOR), 'a <-> s');

select ts_rank_cd(cast(' a:1 s:2 d g' as TSVECTOR), 'a <-> s');

select ts_rank_cd(cast(' a:1 s:2 d:2A g' as TSVECTOR), 'a <-> s');

select ts_rank_cd(cast(' a:1 s:2,3A d:2A g' as TSVECTOR), 'a <2> s:A');

select ts_rank_cd(cast(' a:1 b:2 s:3A d:2A g' as TSVECTOR), 'a <2> s:A');

select ts_rank_cd(cast(' a:1 sa:2D sb:2A g' as TSVECTOR), 'a <-> s:*');

select ts_rank_cd(cast(' a:1 sa:2A sb:2D g' as TSVECTOR), 'a <-> s:*');

select ts_rank_cd(cast(' a:1 sa:2A sb:2D g' as TSVECTOR), 'a <-> s:* <-> sa:A');

select ts_rank_cd(cast(' a:1 sa:2A sb:2D g' as TSVECTOR), 'a <-> s:* <-> sa:B');

select cast('a:1 b:2' as TSVECTOR) @@ cast('a <-> b' as TSQUERY) as "true";

select cast('a:1 b:2' as TSVECTOR) @@ cast('a <0> b' as TSQUERY) as "false";

select cast('a:1 b:2' as TSVECTOR) @@ cast('a <1> b' as TSQUERY) as "true";

select cast('a:1 b:2' as TSVECTOR) @@ cast('a <2> b' as TSQUERY) as "false";

select cast('a:1 b:3' as TSVECTOR) @@ cast('a <-> b' as TSQUERY) as "false";

select cast('a:1 b:3' as TSVECTOR) @@ cast('a <0> b' as TSQUERY) as "false";

select cast('a:1 b:3' as TSVECTOR) @@ cast('a <1> b' as TSQUERY) as "false";

select cast('a:1 b:3' as TSVECTOR) @@ cast('a <2> b' as TSQUERY) as "true";

select cast('a:1 b:3' as TSVECTOR) @@ cast('a <3> b' as TSQUERY) as "false";

select cast('a:1 b:3' as TSVECTOR) @@ cast('a <0> a:*' as TSQUERY) as "true";

select strip(cast('w:12B w:13* w:12,5,6 a:1,3* a:3 w asd:1dc asd' as TSVECTOR));

select strip(cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3' as TSVECTOR));

select strip(cast('base hidden rebel spaceship strike' as TSVECTOR));

select
  ts_delete(
    to_tsvector(
      'english',
      'Rebel spaceships, striking from a hidden base'
    ),
    'spaceship'
  );

select
  ts_delete(
    cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3'
    as TSVECTOR),
    'base'
  );

select
  ts_delete(
    cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3'
    as TSVECTOR),
    'bas'
  );

select
  ts_delete(
    cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3'
    as TSVECTOR),
    'bases'
  );

select
  ts_delete(
    cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3'
    as TSVECTOR),
    'spaceship'
  );

select ts_delete(cast('base hidden rebel spaceship strike' as TSVECTOR), 'spaceship');

select
  ts_delete(
    cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3'
    as TSVECTOR),
    array['spaceship', 'rebel']
  );

select
  ts_delete(
    cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3'
    as TSVECTOR),
    array['spaceships', 'rebel']
  );

select
  ts_delete(
    cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3'
    as TSVECTOR),
    array['spaceshi', 'rebel']
  );

select
  ts_delete(
    cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3'
    as TSVECTOR),
    array['spaceship', 'leya', 'rebel']
  );

select
  ts_delete(
    cast('base hidden rebel spaceship strike'
    as TSVECTOR),
    array['spaceship', 'leya', 'rebel']
  );

select
  ts_delete(
    cast('base hidden rebel spaceship strike'
    as TSVECTOR),
    array['spaceship', 'leya', 'rebel', 'rebel']
  );

select
  ts_delete(
    cast('base hidden rebel spaceship strike'
    as TSVECTOR),
    array['spaceship', 'leya', 'rebel', '', null]
  );

select unnest(cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3' as TSVECTOR));

select unnest(cast('base hidden rebel spaceship strike' as TSVECTOR));

select
  *
from
  unnest(
    cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3'
    as TSVECTOR)
  );

select * from unnest(cast('base hidden rebel spaceship strike' as TSVECTOR));

select
  lexeme,
  positions[1]
from
  unnest(
    cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3'
    as TSVECTOR)
  );

select
  tsvector_to_array(
    cast('base:7 hidden:6 rebel:1 spaceship:2,33A,34B,35C,36D strike:3'
    as TSVECTOR)
  );

select tsvector_to_array(cast('base hidden rebel spaceship strike' as TSVECTOR));

select array_to_tsvector(array['base', 'hidden', 'rebel', 'spaceship', 'strike']);

select array_to_tsvector(array['base', 'hidden', 'rebel', 'spaceship', null]);

select array_to_tsvector(array['base', 'hidden', 'rebel', 'spaceship', '']);

select array_to_tsvector(array['foo', 'bar', 'baz', 'bar']);

select
  setweight(
    cast('w:12B w:13* w:12,5,6 a:1,3* a:3 w asd:1dc asd zxc:81,567,222A'
    as TSVECTOR),
    'c'
  );

select setweight(cast('a:1,3A asd:1C w:5,6,12B,13A zxc:81,222A,567' as TSVECTOR), 'c');

select setweight(cast('a:1,3A asd:1C w:5,6,12B,13A zxc:81,222A,567' as TSVECTOR), 'c', '{a}');

select setweight(cast('a:1,3A asd:1C w:5,6,12B,13A zxc:81,222A,567' as TSVECTOR), 'c', '{a}');

select setweight(cast('a:1,3A asd:1C w:5,6,12B,13A zxc:81,222A,567' as TSVECTOR), 'c', '{a,zxc}');

select setweight(cast('a asd w:5,6,12B,13A zxc' as TSVECTOR), 'c', array['a', 'zxc', '', null]);

select
  ts_filter(
    cast('base:7A empir:17 evil:15 first:11 galact:16 hidden:6A rebel:1A spaceship:2A strike:3A victori:12 won:9'
    as TSVECTOR),
    '{a}'
  );

select ts_filter(cast('base hidden rebel spaceship strike' as TSVECTOR), '{a}');

select ts_filter(cast('base hidden rebel spaceship strike' as TSVECTOR), '{a,b,NULL}');
