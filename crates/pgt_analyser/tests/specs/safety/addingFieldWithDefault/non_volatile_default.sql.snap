---
source: crates/pgt_analyser/tests/rules_tests.rs
expression: snapshot
snapshot_kind: text
---
# Input
```
-- Test non-volatile default values (should be safe in PG 11+, but we are passing no PG version info in the tests)
-- expect_lint/safety/addingFieldWithDefault
ALTER TABLE users ADD COLUMN status text DEFAULT 'active';

```

# Diagnostics
lint/safety/addingFieldWithDefault ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  × Adding a column with a DEFAULT value causes a table rewrite.
  
  i This operation requires an ACCESS EXCLUSIVE lock and rewrites the entire table.
  
  i Add the column without a default, then set the default in a separate statement.
