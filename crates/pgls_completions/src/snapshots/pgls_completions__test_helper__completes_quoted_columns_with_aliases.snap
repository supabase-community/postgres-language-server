---
source: crates/pgls_completions/src/test_helper.rs
expression: final_snapshot
---
***Setup***

create schema if not exists private;

create table private.users (
    id serial primary key,
    email text unique not null,
    name text not null,
    "quoted_column" text
);

create table public.names (
    uid serial references private.users(id),
    name text
);


--------------

***Case 1:***

s|
select |

Results:
name - public.names.name (Column)
uid - public.names.uid (Column)
email - private.users.email (Column)
id - private.users.id (Column)
name - private.users.name (Column)

--------------

select "|

Results:
name" - public.names.name (Column)
uid" - public.names.uid (Column)
email" - private.users.email (Column)
id" - private.users.id (Column)
name" - private.users.name (Column)

--------------

select "|"

Results:
name - public.names.name (Column)
uid - public.names.uid (Column)
email - private.users.email (Column)
id - private.users.id (Column)
name - private.users.name (Column)

--------------

select "p|"

Results:
pad_attribute - information_schema.collations.pad_attribute (Column)
page - pg_catalog.pg_locks.page (Column)
pageno - pg_catalog.pg_largeobject.pageno (Column)
paracl - pg_catalog.pg_parameter_acl.paracl (Column)
parameter_default - information_schema.parameters.parameter_default (Column)

--------------

select "pr".|
select "pr"."|
select "pr"."|"
select "pr"."e|"
select "pr"."email" |
select "pr"."email" f|
select "pr"."email" from |

Results:
names - public.names (Table)
private - private (Schema)
information_schema - information_schema (Schema)
pg_catalog - pg_catalog (Schema)
pg_toast - pg_toast (Schema)

--------------

select "pr"."email" from p|

Results:
private - private (Schema)
public - public (Schema)
pg_catalog - pg_catalog (Schema)
pg_toast - pg_toast (Schema)
information_schema.parameters - information_schema.parameters (Table)

--------------

select "pr"."email" from private.|

Results:
users - private.users (Table)

--------------

select "pr"."email" from private.u|

Results:
users - private.users (Table)

--------------

select "pr"."email" from private.users |
select "pr"."email" from private.users "|
select "pr"."email" from private.users "|"
select "pr"."email" from private.users "p|"
select "pr"."email" from private.users "pr" |




***Case 2:***

s| from private.users "pr"
select | from private.users "pr"

Results:
"pr".email - private.users.email (Column)
"pr".id - private.users.id (Column)
"pr".name - private.users.name (Column)
"pr".quoted_column - private.users.quoted_column (Column)
name - public.names.name (Column)

--------------

select "| from private.users "pr"

Results:
pr"."email" - private.users.email (Column)
pr"."id" - private.users.id (Column)
pr"."name" - private.users.name (Column)
pr"."quoted_column" - private.users.quoted_column (Column)
name" - public.names.name (Column)

--------------

select "|" from private.users "pr"

Results:
pr"."email - private.users.email (Column)
pr"."id - private.users.id (Column)
pr"."name - private.users.name (Column)
pr"."quoted_column - private.users.quoted_column (Column)
name - public.names.name (Column)

--------------

select "e|" from private.users "pr"

Results:
pr"."email - private.users.email (Column)
pr"."name - private.users.name (Column)
pr"."quoted_column - private.users.quoted_column (Column)
name - public.names.name (Column)
elem_count_histogram - pg_catalog.pg_stats.elem_count_histogram (Column)

--------------

select "email" | from private.users "pr"




***Case 3:***

s| from private.users "pr"
select | from private.users "pr"

Results:
"pr".email - private.users.email (Column)
"pr".id - private.users.id (Column)
"pr".name - private.users.name (Column)
"pr".quoted_column - private.users.quoted_column (Column)
name - public.names.name (Column)

--------------

select p| from private.users "pr"

Results:
"pr".email - private.users.email (Column)
"pr".id - private.users.id (Column)
"pr".name - private.users.name (Column)
"pr".quoted_column - private.users.quoted_column (Column)
pad_attribute - information_schema.collations.pad_attribute (Column)

--------------

select pr.| from private.users "pr"

Results:
email - private.users.email (Column)
id - private.users.id (Column)
name - private.users.name (Column)
quoted_column - private.users.quoted_column (Column)

--------------

select pr."| from private.users "pr"

Results:
email" - private.users.email (Column)
id" - private.users.id (Column)
name" - private.users.name (Column)
quoted_column" - private.users.quoted_column (Column)

--------------

select pr."|" from private.users "pr"

Results:
email - private.users.email (Column)
id - private.users.id (Column)
name - private.users.name (Column)
quoted_column - private.users.quoted_column (Column)

--------------

select pr."e|" from private.users "pr"

Results:
email - private.users.email (Column)
name - private.users.name (Column)
quoted_column - private.users.quoted_column (Column)

--------------

select pr."email" | from private.users "pr"




***Case 4:***

s| from private.users "pr"
select | from private.users "pr"

Results:
"pr".email - private.users.email (Column)
"pr".id - private.users.id (Column)
"pr".name - private.users.name (Column)
"pr".quoted_column - private.users.quoted_column (Column)
name - public.names.name (Column)

--------------

select "| from private.users "pr"

Results:
pr"."email" - private.users.email (Column)
pr"."id" - private.users.id (Column)
pr"."name" - private.users.name (Column)
pr"."quoted_column" - private.users.quoted_column (Column)
name" - public.names.name (Column)

--------------

select "|" from private.users "pr"

Results:
pr"."email - private.users.email (Column)
pr"."id - private.users.id (Column)
pr"."name - private.users.name (Column)
pr"."quoted_column - private.users.quoted_column (Column)
name - public.names.name (Column)

--------------

select "p|" from private.users "pr"

Results:
pr"."email - private.users.email (Column)
pr"."id - private.users.id (Column)
pr"."name - private.users.name (Column)
pr"."quoted_column - private.users.quoted_column (Column)
pad_attribute - information_schema.collations.pad_attribute (Column)

--------------

select "pr".| from private.users "pr"

Results:
email - private.users.email (Column)
id - private.users.id (Column)
name - private.users.name (Column)
quoted_column - private.users.quoted_column (Column)

--------------

select "pr"."| from private.users "pr"

Results:
email" - private.users.email (Column)
id" - private.users.id (Column)
name" - private.users.name (Column)
quoted_column" - private.users.quoted_column (Column)

--------------

select "pr"."|" from private.users "pr"

Results:
email - private.users.email (Column)
id - private.users.id (Column)
name - private.users.name (Column)
quoted_column - private.users.quoted_column (Column)

--------------

select "pr"."e|" from private.users "pr"

Results:
email - private.users.email (Column)
name - private.users.name (Column)
quoted_column - private.users.quoted_column (Column)

--------------

select "pr"."email" | from private.users "pr"




***Case 5:***

s| from private.users "pr"
select | from private.users "pr"

Results:
"pr".email - private.users.email (Column)
"pr".id - private.users.id (Column)
"pr".name - private.users.name (Column)
"pr".quoted_column - private.users.quoted_column (Column)
name - public.names.name (Column)

--------------

select p| from private.users "pr"

Results:
"pr".email - private.users.email (Column)
"pr".id - private.users.id (Column)
"pr".name - private.users.name (Column)
"pr".quoted_column - private.users.quoted_column (Column)
pad_attribute - information_schema.collations.pad_attribute (Column)

--------------

select pr.| from private.users "pr"
**not quoted here, since the alias isn't.**

Results:
email - private.users.email (Column)
id - private.users.id (Column)
name - private.users.name (Column)
quoted_column - private.users.quoted_column (Column)

--------------

select pr.e| from private.users "pr"

Results:
email - private.users.email (Column)
name - private.users.name (Column)
quoted_column - private.users.quoted_column (Column)

--------------

select pr.email | from private.users "pr"




***Case 6:***

s| from private.users "pr" join public.names n on pr.id = n.uid;
select | from private.users "pr" join public.names n on pr.id = n.uid;

Results:
n.name - public.names.name (Column)
n.uid - public.names.uid (Column)
"pr".email - private.users.email (Column)
"pr".id - private.users.id (Column)
"pr".name - private.users.name (Column)

--------------

select "| from private.users "pr" join public.names n on pr.id = n.uid;

Results:
n"."name" - public.names.name (Column)
n"."uid" - public.names.uid (Column)
pr"."email" - private.users.email (Column)
pr"."id" - private.users.id (Column)
pr"."name" - private.users.name (Column)

--------------

select "|" from private.users "pr" join public.names n on pr.id = n.uid;

Results:
n"."name - public.names.name (Column)
n"."uid - public.names.uid (Column)
pr"."email - private.users.email (Column)
pr"."id - private.users.id (Column)
pr"."name - private.users.name (Column)

--------------

select "p|" from private.users "pr" join public.names n on pr.id = n.uid;

Results:
pr"."email - private.users.email (Column)
pr"."id - private.users.id (Column)
pr"."name - private.users.name (Column)
pr"."quoted_column - private.users.quoted_column (Column)
pad_attribute - information_schema.collations.pad_attribute (Column)

--------------

select "pr".| from private.users "pr" join public.names n on pr.id = n.uid;

Results:
email - private.users.email (Column)
id - private.users.id (Column)
name - private.users.name (Column)
quoted_column - private.users.quoted_column (Column)

--------------

select "pr".e| from private.users "pr" join public.names n on pr.id = n.uid;

Results:
email - private.users.email (Column)
name - private.users.name (Column)
quoted_column - private.users.quoted_column (Column)

--------------

select "pr"."email", | from private.users "pr" join public.names n on pr.id = n.uid;

Results:
n.name - public.names.name (Column)
n.uid - public.names.uid (Column)
"pr".id - private.users.id (Column)
"pr".name - private.users.name (Column)
"pr".quoted_column - private.users.quoted_column (Column)

--------------

select "pr"."email", n.| from private.users "pr" join public.names n on pr.id = n.uid;

Results:
name - public.names.name (Column)
uid - public.names.uid (Column)

--------------

select "pr"."email", n.u| from private.users "pr" join public.names n on pr.id = n.uid;

Results:
uid - public.names.uid (Column)

--------------

select "pr"."email", n.uid | from private.users "pr" join public.names n on pr.id = n.uid;
